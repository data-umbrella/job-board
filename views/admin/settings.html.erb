<section class="mt-8 w-2/3 mx-auto">
  <div>
    <p class="text-red-500 font-semibold">
      <a href="/admin/<%= @account.slug %>">
        &larr; Back to dashboard
      </a>
    </p>
  </div>
</section>

<div class="rounded shadow my-8 bg-white w-2/3 p-10 mx-auto">
  <div class="font-bold text-2xl mb-2">
    Board Settings
  </div>
  <div class="markdown-text mb-3">
    <p>
      Customize text content and basic features here. <a href="https://www.loom.com/share/113736c85a5c4554b38b3063399398a5" target="_blank">Watch this tutorial </a>to learn about all the fields</a>.
    </p>
  </div>

  <form class="my-6" method="POST" action="settings/board-update">
    <input name="_method" value="patch" type="hidden">

    <div class="mb-4">
      <label class="block text-gray-700 text-sm font-bold mb-2">
        Name of job board or organization
      </label>
      <input class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline" name="org_name" type="text" value="<%= @settings.org_name %>" required>
      <p class="text-gray-600 text-xs italic">The name of your organization or business.</p>
    </div>

    <div class="mb-4">
      <label class="block text-gray-700 text-sm font-bold mb-2">
        Brief description about your board
      </label>
      <textarea class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline" name="org_bio" type="text" rows="10"><%= @settings.org_bio %></textarea>
      <p class="text-gray-600 text-xs italic">Provide a few sentences to summarize what your organization does and what jobs people can find here.</p>
    </div>

    <div class="mb-4">
      <label class="block text-gray-700 text-sm font-bold mb-2">
        Link to your homepage
      </label>
      <input class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline" name="homepage" type="url" value="<%= @settings.homepage %>">
      <p class="text-gray-600 text-xs italic">This will add a link on the top navigation menu to your main website or homepage. This is optional.</p>
    </div>

    <div class="mb-4">
      <label class="block text-gray-700 text-sm font-bold mb-2">
        Google Analytics Tracking ID
      </label>
      <input class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline" name="google-analytics" type="text" value="<%= @settings.google_analytics %>">
      <p class="text-gray-600 text-xs italic">For the best results, create a new property under your account. If you use the same tracking ID as your main website, it will be hard to separate the data.</p>
    </div>

    <div class="mb-4">
      <label class="block text-gray-700 text-sm font-bold mb-2">
        What do companies get when posting a job
      </label>
      <textarea class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline" name="posting_offer" type="text" rows="10"><%= @settings.posting_offer %></textarea>
      <p class="text-gray-600 text-xs italic">Explain what paying for a job posting gets someone, for example, "Your job listing will be posted for 90 days, shared to our 2k+ Twitter followers and 700+ newsletter subscribers."</p>
    </div>

    <div class="mb-4">
      <label class="block text-gray-700 text-sm font-bold mb-2">
        Jobs expire after X days
      </label>
      <input class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline" name="job_expiry" type="number" value="<%= @settings.job_expiry %>">
      <p class="text-gray-600 text-xs italic">After X days the jobs will no longer be listed. Set to 0 for no expiration.</p>
    </div>

    <% if false %>
    <div class="mb-4">
      <label class="block text-gray-700 text-sm font-bold mb-2">
        Enable job moderation
      </label>
      <div class="relative w-32">
        <select class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline" name="moderation">
          <% @options = ["No", "Yes"] %>
          <% @options.each do |option| %>
            <% if @settings.moderation == option %>
              <option value="<%= option %>" selected><%= option %></option>
            <% else %>
              <option value="<%= option %>"><%= option %></option>
            <% end %>
          <% end %>
        </select>
        <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700" style="bottom: 8px; right: 5px">
          <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"/></svg>
        </div>
      </div>
      <p class="text-gray-600 text-xs italic">This option makes every new free job post unpublished. You have to approve each one manually in the job listings page. This will not affect paid job postings. Those are automatically published.</p>
    </div>
    <% end %>

    <div class="mb-4">
      <label class="block text-gray-700 text-sm font-bold mb-2">
        Display weekly digest option
      </label>
      <div class="relative w-32">
        <select class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline" name="digest">
          <% @options = ["No", "Yes"] %>
          <% @options.each do |option| %>
            <% if @settings.digest == option %>
              <option value="<%= option %>" selected><%= option %></option>
            <% else %>
              <option value="<%= option %>"><%= option %></option>
            <% end %>
          <% end %>
        </select>
        <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700" style="bottom: 8px; right: 5px">
          <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"/></svg>
        </div>
      </div>
      <p class="text-gray-600 text-xs italic">Visitors will see a link to subscribe to a weekly update of new jobs. You should turn this off if you have your own newsletter that you plan to share jobs on.</p>
    </div>

    <div class="flex items-center justify-between">
      <button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline" type="submit">
        Update your board
      </button>
    </div>
  </form>

</div>


<div class="rounded shadow my-7 bg-white w-2/3 p-10 mx-auto">
  <div class="font-bold text-2xl mb-2">
    Theme Settings
  </div>
  <div class="markdown-text mb-3">
    <p>
      Customize the look and feel of your job board.
    </p>
  </div>

  <form class="my-6" method="POST" action="settings/theme-update">
    <input name="_method" value="patch" type="hidden">

    <div class="mb-4">
      <label class="block text-gray-700 text-sm font-bold mb-2">
        Change the default font choice
      </label>
      <div class="relative w-32">
        <select class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline" name="font_family">
          <% @fonts = ["", "Fira Sans", "Montserrat", "Poppins", "Raleway", "Rubik"] %>
          <% @fonts.each do |font| %>
            <% if @settings.font_family == font %>
              <option value="<%= font %>" selected><%= font == "" ? "Default" : font %></option>
            <% else %>
              <option value="<%= font %>"><%= font == "" ? "Default" : font %></option>
            <% end %>
          <% end %>
        </select>
        <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700" style="bottom: 8px; right: 5px">
          <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"/></svg>
        </div>
      </div>
      <p class="text-gray-600 text-xs italic">You can choose a different font.</p>
    </div>

    <div class="mb-4">
      <label class="block text-gray-700 text-sm font-bold mb-2">
        Change the background color
      </label>
      <div class="relative w-32">
        <select class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline" name="bg_color">
          <% @colors = ["White", "Gray"] %>
          <% @colors.each do |color| %>
            <% color_val = color.downcase %>
            <% if @settings.bg_color == color_val %>
              <option value="<%= color_val %>" selected><%= color %></option>
            <% else %>
              <option value="<%= color_val %>"><%= color %></option>
            <% end %>
          <% end %>
        </select>
        <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700" style="bottom: 8px; right: 5px">
          <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"/></svg>
        </div>
      </div>

      <p class="text-gray-600 text-xs italic">You can choose a different background color. Just remember to pair the accent and background colors together.</p>
    </div>


    <div class="mb-4">
      <label class="block text-gray-700 text-sm font-bold mb-2">
        Change the accent color
      </label>
      <div class="relative w-32">
        <select class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline" name="accent_color">
          <% @colors = ["Gray", "Red", "Orange", "Yellow", "Green", "Teal", "Blue", "Indigo", "Purple", "Pink"] %>
          <% @colors.each do |color| %>
            <% color_val = color.downcase %>
            <% if @settings.accent_color == color_val %>
              <option value="<%= color_val %>" selected><%= color %></option>
            <% else %>
              <option value="<%= color_val %>"><%= color %></option>
            <% end %>
          <% end %>
        </select>
        <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700" style="bottom: 8px; right: 5px">
          <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"/></svg>
        </div>
      </div>
      <p class="text-gray-600 text-xs italic">You can choose a different color for buttons and links.</p>
    </div>

    <div class="mb-4">
      <label class="block text-gray-700 text-sm font-bold mb-2">
        Display dark mode option
      </label>
      <div class="relative w-32">
        <select class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline" name="dark_mode">
          <% @options = ["No", "Yes"] %>
          <% @options.each do |option| %>
            <% if @settings.dark_mode == option %>
              <option value="<%= option %>" selected><%= option %></option>
            <% else %>
              <option value="<%= option %>"><%= option %></option>
            <% end %>
          <% end %>
        </select>
        <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700" style="bottom: 8px; right: 5px">
          <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"/></svg>
        </div>
      </div>
      <p class="text-gray-600 text-xs italic">Visitors will see a link in the navigation to toggle dark mode on and off.</p>
    </div>

    <div class="flex items-center justify-between">
      <button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline" type="submit">
        Update your theme
      </button>
    </div>
  </form>

</div>



<div class="rounded shadow my-8 bg-white w-2/3 p-10 mx-auto">
  <div class="font-bold text-2xl mb-2 ">
    Logo Settings
  </div>
  <div class="mb-4">
    <label class="block text-gray-700 text-sm font-bold mb-2">
      Your Logo
    </label>

    <% if (@settings.logo) and (!@settings.logo.empty?) %>
    <div class="mb-2">
      <img src="/logos/<%= @settings.logo %>" alt="" width="100">
    </div>
    <div class="mb-2">
      <form method="POST" action="settings/logo" onsubmit="return confirm('Are you sure you want to delete this job?');">
        <div style="margin:0;padding:0">
          <input name="_method" value="delete" type="hidden" />
          <button class="text-red-500 font-semibold underline" type="submit">Delete logo</button>
        </div>
      </form>
    </div>
    <% end %>

    <form class="my-6" method="POST" action="settings/logo" enctype="multipart/form-data">
      <input name="_method" value="patch" type="hidden">
      <input class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline" name="logo" type="file" accept="image/jpg, image/jpeg, image/png, image/gif" id="logo-upload" required>
      <p class="text-gray-600 text-xs italic mb-2">This will replace the name of your organization on the top right of the job board. Please make sure the file is less than 1 MB (<a href="https://www.loom.com/share/468afe6b773849fd93615b0b15b28f42" target="_blank" class="underline">resizing tutorial</a>) and is either a JPG or PNG file. If you use a different color theme, your logo must be a PNG with a transparent background or else it will have a white block behind it and look odd. <a href="https://www.loom.com/share/b12768ecc213479188fae4b28fac364d" target="_blank" class="underline">You can use a free tool as shown here</a> but it is better to get this from the person that designed the original logo.</p>
      <div class="flex items-center justify-between">
        <button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline" type="submit">
          Update logo
        </button>
      </div>
    </form>
  </div>

</div>


<script>
  const uploadField = document.getElementById("logo-upload");

  uploadField.onchange = function() {
    if(this.files[0].size > 1097152){
       alert("File is too big!");
       this.value = "";
    };
  };

</script>
